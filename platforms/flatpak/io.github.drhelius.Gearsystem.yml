id: io.github.drhelius.Gearsystem
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk
command: gearsystem
finish-args:
  - --share=ipc
  - --socket=x11
  - --device=dri
  - --socket=pulseaudio
  - --device=all # Allows for controller input
modules:
  - shared-modules/glu/glu-9.json
  - shared-modules/glew/glew.json
  - shared-modules/SDL2/SDL2-no-libdecor.json
  - name: nfde
    buildsystem: cmake
    config-opts:
      - -DNFD_PORTAL=ON
      - -DCMAKE_BUILD_TYPE=Release
      - -DNFD_BUILD_TESTS=OFF
      - -DCMAKE_INSTALL_INCLUDEDIR=include/nfd
    sources:
      - type: git
        url: https://github.com/btzy/nativefiledialog-extended.git
        tag: v1.1.1
        commit: 5786fabceeaee4d892f3c7a16b243796244cdddc
  - name: gearsystem
    buildsystem: simple
    build-commands:
      - make
      - make install prefix="$FLATPAK_DEST"
    subdir: platforms/flatpak
    sources:
      # A reference to a specific commit is used whilst this is in development.
      # Ideally this will use either a release archive or a specific tag/commit
      # pair.
      # There is also an option to use a type of "dir" and a path of "../.." to
      # allow for builds from the current commit. This may be useful for
      # "master" or "nightly" builds, but this may require further exploration.
      - type: dir
        path: ../..
